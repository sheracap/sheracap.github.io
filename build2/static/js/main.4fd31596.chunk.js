(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{246:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(26),r=a.n(n),s=a(21),o=a(18),i=a(88),d=a(141),u=a(142),l=a(19),j="SIGN_IN",b="SIGN_IN_SUCCESS",O="SIGN_IN_ERROR",h="RESET_SIGN_IN",f="REGISTER",g="REGISTER_SUCCESS",p="REGISTER_ERROR",m="RESET_REGISTER",y="LOG_OUT",x="LOG_OUT_SUCCESS",v="LOG_OUT_ERROR",E="RESET_LOG_OUT",_={signIn:{loading:!1,success:!1,error:null},register:{loading:!1,success:!1,error:null},logOut:{loading:!1,success:!1,error:null}},I="GET_USER_INFO",R="GET_USER_INFO_SUCCESS",C="GET_USER_INFO_ERROR",N="ADD_CATEGORY",S="ADD_CATEGORY_SUCCESS",w="ADD_CATEGORY_ERROR",T="RESET_ADD_CATEGORY",G="GET_CATEGORIES",k="GET_CATEGORIES_SUCCESS",A="GET_CATEGORIES_ERROR",D="GET_CURRENT_CATEGORY",U="GET_CURRENT_CATEGORY_SUCCESS",z="GET_CURRENT_CATEGORY_ERROR",P="ADD_WORD",W="ADD_WORD_SUCCESS",L="ADD_WORD_ERROR",F="RESET_ADD_WORD",Y={userInfo:{loading:!1,data:null,error:null},addCategory:{loading:!1,success:null,error:null},categories:{loading:!1,data:[],error:null},currentCategory:{loading:!1,data:null,error:null},addWord:{loading:!1,success:null,error:null}},M=Object(u.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(l.a)(e,(function(e){e.signIn.loading=!0}));case b:return Object(l.a)(e,(function(e){e.signIn={loading:!1,success:!0,error:null}}));case O:return Object(l.a)(e,(function(e){e.signIn={loading:!1,success:!1,error:t.payload}}));case h:return Object(l.a)(e,(function(e){e.signIn={loading:!1,success:!1,error:null}}));case f:return Object(l.a)(e,(function(e){e.register.loading=!0}));case g:return Object(l.a)(e,(function(e){e.register={loading:!1,success:!0,error:null}}));case p:return Object(l.a)(e,(function(e){e.register={loading:!1,success:!1,error:t.payload}}));case m:return Object(l.a)(e,(function(e){e.register={loading:!1,success:!1,error:null}}));case y:return Object(l.a)(e,(function(e){e.logOut.loading=!0}));case x:return Object(l.a)(e,(function(e){e.logOut={loading:!1,success:!0,error:null}}));case v:return Object(l.a)(e,(function(e){e.logOut={loading:!1,success:!1,error:t.payload}}));case E:return Object(l.a)(e,(function(e){e.logOut={loading:!1,success:!1,error:null}}));default:return e}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(l.a)(e,(function(e){e.userInfo.loading=!0}));case R:return Object(l.a)(e,(function(e){e.userInfo={loading:!1,data:t.payload,error:null}}));case C:return Object(l.a)(e,(function(e){e.userInfo={loading:!1,data:null,error:t.payload}}));case G:return Object(l.a)(e,(function(e){e.categories.loading=!0}));case k:return Object(l.a)(e,(function(e){e.categories={loading:!1,data:t.payload,error:null}}));case A:return Object(l.a)(e,(function(e){e.categories={loading:!1,data:[],error:t.payload}}));case D:return Object(l.a)(e,(function(e){e.currentCategory.loading=!0}));case U:return Object(l.a)(e,(function(e){e.currentCategory={loading:!1,data:t.payload,error:null}}));case z:return Object(l.a)(e,(function(e){e.currentCategory={loading:!1,data:null,error:t.payload}}));case N:return Object(l.a)(e,(function(e){e.addCategory.loading=!0}));case S:return Object(l.a)(e,(function(e){e.addCategory={loading:!1,success:!0,error:null}}));case w:return Object(l.a)(e,(function(e){e.addCategory={loading:!1,success:!1,error:t.payload}}));case T:return Object(l.a)(e,(function(e){e.addCategory={loading:!1,success:!1,error:null}}));case P:return Object(l.a)(e,(function(e){e.addWord.loading=!0}));case W:return Object(l.a)(e,(function(e){e.addWord={loading:!1,success:!0,error:null}}));case L:return Object(l.a)(e,(function(e){e.addWord={loading:!1,success:!1,error:t.payload}}));case F:return Object(l.a)(e,(function(e){e.addWord={loading:!1,success:!1,error:null}}));default:return e}}}),Q=Object(i.a)(d.a),B=Object(i.c)(M,Q),H=a(62),J=a(29),K=a(48),V=a(28),X=a(40),q=a(35),Z=a(36),$=a.n(Z),ee=a(5),te=function(e){var t=Object(s.c)((function(e){return e.get("auth")})),a=Object(s.b)(),n=t.signIn,r=Object(c.useState)({}),o=Object(X.a)(r,2),i=o[0],d=o[1];Object(c.useEffect)((function(){n.success&&(a((function(e){e({type:h})})),e.history.push("/"))}),[e.history,n.success]);var u=function(e,t){d(Object(V.a)(Object(V.a)({},i),{},Object(K.a)({},e,t)))};return Object(ee.jsxs)("div",{children:[n.loading&&Object(ee.jsx)("div",{children:"...LOADING"}),n.error&&Object(ee.jsx)("div",{className:"auth__error",children:n.error.message}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("div",{children:"Login"}),Object(ee.jsx)("input",{type:"text",onChange:function(e){return u("email",e.target.value)}})]}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("div",{children:"Password"}),Object(ee.jsx)("input",{type:"password",onChange:function(e){return u("password",e.target.value)}})]}),Object(ee.jsx)("div",{children:Object(ee.jsx)("button",{onClick:function(){var e;a((e=i,function(t){t({type:j}),q.a.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){q.a.auth().currentUser.getIdToken().then((function(a){t({type:b}),$.a.set("access-token",a),$.a.set("userId",e.user.uid)}))})).catch((function(e){t({type:O,payload:e})}))}))},children:"\u0412\u043e\u0439\u0442\u0438"})})]})},ae=function(e){var t=Object(s.c)((function(e){return e.get("auth")})),a=Object(s.b)(),n=t.register,r=Object(c.useState)({}),o=Object(X.a)(r,2),i=o[0],d=o[1];Object(c.useEffect)((function(){n.success&&(a((function(e){e({type:m})})),e.history.push("/"))}),[e.history,n.success]);var u=function(e,t){d(Object(V.a)(Object(V.a)({},i),{},Object(K.a)({},e,t)))};return Object(ee.jsxs)("div",{children:[n.loading&&Object(ee.jsx)("div",{children:"...LOADING"}),n.error&&Object(ee.jsx)("div",{className:"auth__error",children:n.error.message}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("div",{children:"Name"}),Object(ee.jsx)("input",{type:"text",onChange:function(e){return u("name",e.target.value)}})]}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("div",{children:"Login"}),Object(ee.jsx)("input",{type:"text",onChange:function(e){return u("email",e.target.value)}})]}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("div",{children:"Password"}),Object(ee.jsx)("input",{type:"password",onChange:function(e){return u("password",e.target.value)}})]}),Object(ee.jsx)("div",{children:Object(ee.jsx)("button",{onClick:function(){var e;a((e=i,function(t){t({type:f}),q.a.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(a){q.a.auth().currentUser.getIdToken().then((function(c){var n=a.user.uid;$.a.set("access-token",c),$.a.set("userId",n),q.a.database().ref("/users/".concat(n,"/info")).set({id:n,name:e.name}).then((function(){t({type:g})}))}))})).catch((function(e){t({type:p,payload:e})}))}))},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})},ce=function(){return Object(ee.jsx)("div",{className:"auth",children:Object(ee.jsxs)(J.c,{children:[Object(ee.jsx)(J.a,{path:"/auth/sign-in",component:te}),Object(ee.jsx)(J.a,{path:"/auth/register",component:ae})]})})},ne=a(254),re=a(125),se=function(e){return function(t){t({type:G}),q.a.database().ref("/users/".concat(e.userId,"/categories-list")).once("value").then((function(e){var a=Object.keys(e.val()).map((function(t){return Object(V.a)({id:t},e.val()[t])}));t({type:k,payload:a})})).catch((function(e){t({type:A,payload:e})}))}},oe=function(e){return function(t){t({type:D}),q.a.database().ref("/users/".concat(e.userId,"/categories")).child(e.categoryId).once("value").then((function(e){t({type:U,payload:e.val()})})).catch((function(e){t({type:z,payload:e})}))}},ie=a(46),de=a(261),ue=function(){var e=Object(s.c)((function(e){return e.get("auth")})),t=Object(s.c)((function(e){return e.get("main")})),a=Object(s.b)(),n=Object(J.f)(),r=e.logOut,o=t.userInfo;Object(c.useEffect)((function(){r.success&&(a((function(e){e({type:E})})),n.push("/auth/sign-in"))}),[n,r.success]);var i=Object(ee.jsxs)("div",{className:"dropdown-menu",children:[Object(ee.jsx)("div",{className:"dropdown-menu-title",children:o.data?o.data.name:""}),Object(ee.jsx)(ie.a,{onClick:function(){a((function(e){e({type:y}),q.a.auth().signOut().then((function(){e({type:x}),$.a.remove("access-token"),$.a.remove("userId")})).catch((function(t){e({type:v,payload:t})}))}))},type:"primary",size:"large",children:"Log out"})]});return Object(ee.jsx)(de.a,{overlay:i,trigger:["click"],placement:"bottomRight",arrow:!0,children:Object(ee.jsx)(ie.a,{type:"primary",size:"large",children:"USER"})})},le=ne.a.Header,je=function(){var e=Object(s.b)();return Object(c.useEffect)((function(){var t,a=$.a.get("userId");e((t={userId:a},function(e){e({type:I}),q.a.database().ref("/users/".concat(t.userId,"/info")).once("value").then((function(t){e({type:R,payload:t.val()})})).catch((function(t){e({type:C,payload:t})}))}))}),[]),Object(ee.jsx)(le,{className:"header",children:Object(ee.jsxs)("div",{className:"header__in",children:[Object(ee.jsx)("div",{className:"logo"}),Object(ee.jsx)(ue,{})]})})},be=a(255),Oe=a(262),he=a(158),fe=a(260),ge=a(263),pe=a(258),me=a(259),ye=a(256),xe=a(257),ve=function(e){var t=e.title,a=e.children,c=e.error,n=e.className;return Object(ee.jsxs)("div",{className:"form-field-item ".concat(n||""," ").concat(c?"form-field-item-error ant-form-item-has-error":""),children:[t&&Object(ee.jsx)("div",{className:"form-field-item__title",children:t}),a,c&&Object(ee.jsx)("div",{className:"form-field-item__error",children:c})]})},Ee=function(e){var t=Object(s.c)((function(e){return e.get("main")})),a=Object(s.b)(),n=t.userInfo,r=t.addCategory,o=e.modalProps,i=e.setModalProps,d=Object(c.useState)({userId:n.data.id}),u=Object(X.a)(d,2),l=u[0],j=u[1],b=Object(c.useState)({}),O=Object(X.a)(b,2),h=O[0],f=O[1];Object(c.useEffect)((function(){r.success&&(he.a.success({message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"}),g(),a((function(e){e({type:T})})),a(se({userId:n.data.id})))}),[r.success]);var g=function(){i(Object(V.a)(Object(V.a)({},o),{},{visible:!1}))};return Object(ee.jsxs)(fe.a,{className:"custom-modal",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",visible:o.visible,onCancel:g,afterClose:function(){i(Object(V.a)(Object(V.a)({},o),{},{shouldRender:!1}))},footer:null,width:480,children:[r.error&&Object(ee.jsx)("div",{className:"m-b-20",children:Object(ee.jsx)(ge.a,{message:r.error.message,type:"error"})}),r.loading&&Object(ee.jsx)("div",{className:"modal-loader",children:Object(ee.jsx)(be.a,{size:"large"})}),Object(ee.jsxs)(pe.a,{onFinish:function(){var e=function(){var e={};return l.name||(e.name="\u041d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043f\u043e\u043b\u0435"),e}();Object.keys(e).length?f(e):(f({}),a(function(e){var t=e.userId,a=Object(re.a)(e,["userId"]);return function(e){e({type:N}),q.a.database().ref("/users/".concat(t,"/categories-list")).push(a).then((function(c){q.a.database().ref("/users/".concat(t,"/categories/").concat(c.key)).set(a).then((function(){e({type:S})}))})).catch((function(t){e({type:w,payload:t})}))}}(l)))},children:[Object(ee.jsx)(ve,{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",error:h.name,children:Object(ee.jsx)(me.a,{size:"large",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",type:"text",value:l.name,onChange:function(e){return t="name",a=e.target.value,void j(Object(V.a)(Object(V.a)({},l),{},Object(K.a)({},t,a)));var t,a}})}),Object(ee.jsxs)(ye.a,{className:"custom-modal__button-row",type:"flex",gutter:[24,0],children:[Object(ee.jsx)(xe.a,{span:12,children:Object(ee.jsx)(ie.a,{size:"large",type:"ghost",onClick:g,className:"full-width",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(ee.jsx)(xe.a,{span:12,children:Object(ee.jsx)(ie.a,{size:"large",type:"primary",htmlType:"submit",className:"full-width",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})},_e=$.a.get("userId"),Ie=function(){var e=Object(s.c)((function(e){return e.get("main")})),t=Object(s.b)(),a=e.categories,n=Object(c.useState)({visible:!1,shouldRender:!1}),r=Object(X.a)(n,2),o=r[0],i=r[1];return Object(c.useEffect)((function(){t(se({userId:_e}))}),[]),Object(ee.jsxs)(ee.Fragment,{children:[a.loading&&Object(ee.jsx)("div",{className:"abs-loader",children:Object(ee.jsx)(be.a,{size:"large"})}),Object(ee.jsx)("div",{className:"add-category-btn",children:Object(ee.jsx)(ie.a,{type:"primary",onClick:function(){return i({visible:!0,shouldRender:!0})},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e +"})}),Object(ee.jsx)(Oe.a,{mode:"inline",style:{borderRight:0},children:a.data.map((function(e){return Object(ee.jsx)(Oe.a.Item,{children:Object(ee.jsx)(H.b,{to:"/folder/".concat(e.id),children:e.name})},e.id)}))}),o.shouldRender&&Object(ee.jsx)(Ee,{modalProps:o,setModalProps:i})]})},Re=function(e){var t=Object(s.c)((function(e){return e.get("main")})),a=Object(s.b)(),n=t.userInfo,r=t.addWord,o=e.modalProps,i=e.setModalProps,d=Object(c.useState)({userId:n.data.id,categoryId:o.categoryId}),u=Object(X.a)(d,2),l=u[0],j=u[1],b=Object(c.useState)({}),O=Object(X.a)(b,2),h=O[0],f=O[1];Object(c.useEffect)((function(){r.success&&(he.a.success({message:"\u0421\u043b\u043e\u0432\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"}),g(),a((function(e){e({type:F})})))}),[r.success]);var g=function(){i(Object(V.a)(Object(V.a)({},o),{},{visible:!1}))},p=function(e,t){j(Object(V.a)(Object(V.a)({},l),{},Object(K.a)({},e,t)))};return Object(ee.jsxs)(fe.a,{className:"custom-modal",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u043e\u0432\u043e",visible:o.visible,onCancel:g,afterClose:function(){i(Object(V.a)(Object(V.a)({},o),{},{shouldRender:!1,categoryId:null}))},footer:null,width:480,children:[r.error&&Object(ee.jsx)("div",{className:"m-b-20",children:Object(ee.jsx)(ge.a,{message:r.error.message,type:"error"})}),r.loading&&Object(ee.jsx)("div",{className:"modal-loader",children:Object(ee.jsx)(be.a,{size:"large"})}),Object(ee.jsxs)(pe.a,{onFinish:function(){var e=function(){var e="\u041d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043f\u043e\u043b\u0435",t={};return l.wordName||(t.wordName=e),l.wordTranslate||(t.wordTranslate=e),t}();Object.keys(e).length?f(e):(f({}),a(function(e){var t=e.userId,a=e.categoryId,c=Object(re.a)(e,["userId","categoryId"]);return function(e){e({type:P}),q.a.database().ref("/users/".concat(t,"/categories")).child(a).child("words").push(c).then((function(){e({type:W})})).catch((function(t){e({type:L,payload:t})}))}}(l)))},children:[Object(ee.jsx)(ve,{title:"\u0421\u043b\u043e\u0432\u043e",error:h.wordName,children:Object(ee.jsx)(me.a,{size:"large",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e",type:"text",value:l.wordName,onChange:function(e){return p("wordName",e.target.value)}})}),Object(ee.jsx)(ve,{title:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434",error:h.wordTranslate,children:Object(ee.jsx)(me.a,{size:"large",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434",type:"text",value:l.wordTranslate,onChange:function(e){return p("wordTranslate",e.target.value)}})}),Object(ee.jsxs)(ye.a,{className:"custom-modal__button-row",type:"flex",gutter:[24,0],children:[Object(ee.jsx)(xe.a,{span:12,children:Object(ee.jsx)(ie.a,{size:"large",type:"ghost",onClick:g,className:"full-width",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(ee.jsx)(xe.a,{span:12,children:Object(ee.jsx)(ie.a,{size:"large",type:"primary",htmlType:"submit",className:"full-width",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})},Ce=$.a.get("userId"),Ne=function(e){var t=Object(s.c)((function(e){return e.get("main")})),a=e.match.params.id,n=Object(s.b)(),r=t.currentCategory,o=Object(c.useState)({visible:!1,shouldRender:!1,categoryId:null}),i=Object(X.a)(o,2),d=i[0],u=i[1];Object(c.useEffect)((function(){n(oe({userId:Ce,categoryId:a}))}),[]);return Object(ee.jsxs)("div",{className:"category-page",children:[Object(ee.jsx)(ie.a,{onClick:function(){n(oe({userId:Ce,categoryId:a}))},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),r.data?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("div",{className:"category-page__head",children:[Object(ee.jsxs)("h1",{children:['\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f "',r.data.name,'"']}),Object(ee.jsx)(ie.a,{type:"primary",onClick:function(){return u({visible:!0,shouldRender:!0,categoryId:a})},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u043e\u0432\u043e"})]}),r.data.words&&Object(ee.jsx)("div",{className:"words",children:Object.keys(r.data.words).map((function(e){return Object(ee.jsxs)("div",{className:"words__item",children:[Object(ee.jsx)("div",{className:"words__item__word",children:r.data.words[e].wordName}),Object(ee.jsx)("div",{className:"words__item__word",children:r.data.words[e].wordTranslate})]},e)}))}),d.shouldRender&&Object(ee.jsx)(Re,{modalProps:d,setModalProps:u})]}):Object(ee.jsx)("div",{className:"abs-loader",children:Object(ee.jsx)(be.a,{size:"large"})})]})},Se=ne.a.Content,we=function(){return Object(ee.jsx)(ne.a,{style:{padding:"24px"},children:Object(ee.jsx)(Se,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280,backgroundColor:"#fff"},children:Object(ee.jsx)(J.c,{children:Object(ee.jsx)(J.a,{path:"/folder/:id",component:Ne})})})})},Te=(a(246),ne.a.Sider),Ge=function(e){var t=$.a.get("access-token");return Object(c.useEffect)((function(){t||e.history.push("/auth/sign-in")}),[e.history]),Object(ee.jsx)("div",{className:"main",children:t?Object(ee.jsxs)(ne.a,{children:[Object(ee.jsx)(je,{}),Object(ee.jsxs)(ne.a,{children:[Object(ee.jsx)(Te,{width:200,className:"site-layout-background",children:Object(ee.jsx)(Ie,{})}),Object(ee.jsx)(we,{})]})]}):Object(ee.jsx)("div",{children:"Loading..."})})},ke=function(){return Object(ee.jsx)("div",{className:"App",children:Object(ee.jsx)(H.a,{children:Object(ee.jsxs)(J.c,{children:[Object(ee.jsx)(J.a,{path:"/auth",component:ce}),Object(ee.jsx)(J.a,{path:"/",component:Ge})]})})})};a(247),a(248),a(250);q.a.initializeApp({apiKey:"AIzaSyCiV9CQTPxRnQkEDAGbFA90vWorQbkdAgs",authDomain:"my-english-project-78dd7.firebaseapp.com",projectId:"my-english-project-78dd7",storageBucket:"my-english-project-78dd7.appspot.com",messagingSenderId:"308405865276",appId:"1:308405865276:web:396ef2dba1af1fcfecac39",measurementId:"G-X3KC9GEE1D"}),r.a.render(Object(ee.jsx)(s.a,{store:B,children:Object(ee.jsx)(o.a,{children:Object(ee.jsx)(ke,{})})}),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.4fd31596.chunk.js.map